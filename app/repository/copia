import mysql.connector
from flask import request

# Crear una conexión a la base de datos
conexion = mysql.connector.connect(
    host='localhost',
    port=3306,
    user='root',
    password='0909',
    database='epicgames'
)

# Crear un cursor para ejecutar las consultas SQL
cursor = conexion.cursor()


def insertar_usuario():
    # Obtener los datos del formulario
    id = request.form['id']

    foto = request.files['foto']

    # Convertir la imagen a bytes para almacenarla en la base de datos
    bytes_imagen = foto.read()

    # Crear la consulta SQL para insertar los datos en la tabla de usuarios
    consulta = "UPDATE Games set image={0} where id = {1}".format(bytes_imagen,id)
    valores = (id, bytes_imagen)

    # Ejecutar la consulta y confirmar los cambios
    cursor.execute(consulta, valores)
    conexion.commit()

    # Cerrar el cursor
    cursor.close()


# Cerrar la conexión a la base de datos
conexion.close()
